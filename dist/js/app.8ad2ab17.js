(function(e){function t(t){for(var n,o,u=t[0],c=t[1],i=t[2],d=0,f=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},o={app:0},a={app:0},s=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-7da0364a":"319ae1fb"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-7da0364a":1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-7da0364a":"c3e60325"}[e]+".css",a=c.p+n,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var i=s[u],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===n||d===a))return t()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){i=f[u],d=i.getAttribute("data-href");if(d===n||d===a)return t()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=t,l.onerror=function(t){var n=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete o[e],l.parentNode.removeChild(l),r(s)},l.href=a;var g=document.getElementsByTagName("head")[0];g.appendChild(l)})).then((function(){o[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=s);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=u(e);var f=new Error;i=function(t){d.onerror=d.onload=null,clearTimeout(l);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",f.name="ChunkLoadError",f.type=n,f.request=o,r[1](f)}a[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/Simple-Note/dist/",c.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var f=0;f<i.length;f++)t(i[f]);var l=d;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},2395:function(e,t,r){},"2b92":function(e,t,r){"use strict";var n=r("4ba7"),o=r.n(n);o.a},"4ba7":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=r("5c96"),a=r.n(o),s=(r("0fae"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Header"),r("router-view",{staticClass:"rv"})],1)}),u=[],c=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("div",{staticClass:"main"},[r("div",{staticClass:"title"},[e._v("Simple Notee")])])])}],d={name:"Header",data:function(){return{showMenu:!1}},computed:{user:function(){return this.$store.state.user}}},f=d,l=(r("2b92"),r("2877")),g=Object(l["a"])(f,c,i,!1,null,"a6e92a98",null),p=g.exports,v={name:"learn",components:{Header:p}},w=v,b=(r("7c55"),Object(l["a"])(w,s,u,!1,null,null,null)),m=b.exports,h=(r("d3b7"),r("8c4f")),j=function(){return r.e("chunk-7da0364a").then(r.bind(null,"0558"))};n["default"].use(h["a"]);var y=[{path:"/",name:"index",redirect:"/note"},{path:"*",name:"404",redirect:"/note"},{path:"/note",name:"note",component:j}],O=new h["a"]({base:"/Simple-Note/dist/",routes:y}),S=O,E=r("5530"),A=r("2f62");n["default"].use(A["a"]);var P=new A["a"].Store({state:{user:JSON.parse(localStorage.getItem("user")||"{}")},mutations:{setUser:function(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))},logout:function(e){e.user={},localStorage.removeItem("user")}},actions:{updateUser:function(e,t){var r=e.commit,n=e.state;r("setUser",Object(E["a"])(Object(E["a"])({},n.user),t))}},modules:{},getters:{user:function(e){return e.user}}}),x=(r("4de4"),r("d81d"),{}),_={on:function(e,t,r){var n=[t,r],o=x[e];Array.isArray(o)?o.push(n):x[e]=[n]},remove:function(e,t){var r=x[e];Array.isArray(r)&&(x[e]=r.filter((function(e){return e[0]!==t})))},emit:function(e,t){var r=x[e];Array.isArray(r)&&r.map((function(e){var r=e[0],n=e[1];n.call(r,t)}))},has:function(e){return!!x[e]},off:function(e){x[e]=[]}},C=_,D=r("6a90");n["default"].prototype.$event=C,n["default"].prototype.$cache=D["a"],n["default"].use(a.a),n["default"].config.productionTip=!1,new n["default"]({router:S,store:P,render:function(e){return e(m)}}).$mount("#app")},"6a90":function(e,t,r){"use strict";r("d3b7"),r("ac1f"),r("1276");var n,o=r("ade3"),a=r("5530"),s={database:"simple-note",version:3},u=function(){if(!n){var e=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;if(!e)return alert("你的浏览器版本太旧，将导致本站无法正常使用");var t=e.open(s.database,s.version);t.onsuccess=function(e){n=e.target.result},t.onerror=function(e){alert("缓存加载失败，请刷新页面")},t.onupgradeneeded=function(e){if(n=e.target.result,!n.objectStoreNames.contains("note")){var t=n.createObjectStore("note",{keyPath:"_id",autoIncrement:!0});t.createIndex("tags","tags",{unique:!1}),t.createIndex("content","content",{unique:!1}),t.createIndex("state","state",{unique:!1}),t.createIndex("createdAt","createdAt",{unique:!1})}}}},c=function(){return new Promise((function(e,t){if(!n)return t(new Error("db not connected"));var r=n.transaction("note"),o=r.objectStore("note"),a=[];o.openCursor().onsuccess=function(t){var r=t.target.result;r?(r.value.state&&(r.value.tags=r.value.tags.split(" "),a.push(r.value)),r.continue()):e(a)}}))},i=function(e,t){return new Promise((function(r,o){if(!n)return o(new Error("db not connected"));var a=n.transaction("note","readwrite"),s=a.objectStore("note"),u=s.add({tags:e,content:t,state:1,createdAt:(new Date).toLocaleString()});u.onsuccess=function(e){var t=e.target.result;r(t)},u.onerror=function(e){o(e.target.error)}}))},d=function(e){return new Promise((function(t,r){if(!n)return r(new Error("db not connected"));var o=n.transaction("note","readwrite"),a=o.objectStore("note"),s=a.delete(e);s.onsuccess=function(e){var r=e.target.result;t(r)},s.onerror=function(e){r(e.target.error)}}))},f=function(e){return new Promise((function(t,r){if(!n)return r(new Error("db not connected"));var o=n.transaction("user","readwrite"),a=o.objectStore("user"),s=a.add(e);s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){r(e.target.error)}}))},l=function(e){return new Promise((function(t,r){if(!n)return r(new Error("db not connected"));var o=n.transaction("user","readwrite"),a=o.objectStore("user"),s=a.get(e);s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){r(e.target.error)}}))},g=function(e){return new Promise((function(t,r){if(!n)return r(new Error("db not connected"));var o=n.transaction("user","readwrite"),a=o.objectStore("user"),s=a.index("username").get(e.toLowerCase());s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){r(e.target.error)}}))},p=function(e,t){return new Promise((function(r,o){if(!n)return o(new Error("db not connected"));var s=n.transaction("user","readwrite"),u=s.objectStore("user"),c=u.index("username").get(e.toLowerCase());c.onsuccess=function(n){var s=n.target.result;if(s){if(t!==s.password)return o(new Error("password"));r(n.target.result)}else{s={username:e,password:t,createdAt:Date.now()};var c=u.add(s);c.onsuccess=function(e){r(Object(a["a"])({_id:e.target.result},s))},c.onerror=function(e){o(e.target.error)}}},c.onerror=function(e){o(e.target.error)}}))},v=function(e){return new Promise((function(t,r){if(!n)return r(new Error("db not connected"));var o=n.transaction("learned","readwrite"),a=o.objectStore("learned"),s=a.index("user").get(e);s.onsuccess=function(e){var r=e.target.result||{},n=r.words;t(n||{})},s.onerror=function(e){r(e.target.error)}}))},w=function(e){return new Promise((function(t,r){if(!n)return r(new Error("db not connected"));var o=n.transaction("progress","readwrite"),a=o.objectStore("progress"),s=a.index("user").get(e);s.onsuccess=function(e){var r=e.target.result||{},n=r.lists;t(n||{})},s.onerror=function(e){r(e.target.error)}}))},b=function(e,t){return new Promise((function(r,o){if(!n)return o(new Error("db not connected"));var a=n.transaction("progress","readwrite"),s=a.objectStore("progress"),u=s.index("user").get(e);u.onsuccess=function(e){var n=e.target.result||{},o=n.lists;o&&o[t]?r(o[t]):r({})},u.onerror=function(e){o(e.target.error)}}))},m=function(e,t){return new Promise((function(r,o){if(!n)return o(new Error("db not connected"));var a=n.transaction("learned","readwrite"),s=a.objectStore("learned"),u=s.index("user").get(e);u.onsuccess=function(e){var n=e.target.result||{},o=n.words;o&&o[t]?r(!0):r(!1)},u.onerror=function(e){o(e.target.error)}}))},h=function(e,t,r){var s=r.update,u=void 0===s||s,c=r.period,i=void 0===c?0:c,d=r.stage,f=void 0===d?0:d,l=r.periodChange,g=void 0===l?0:l,p=r.stageChange,v=void 0===p?0:p;return new Promise((function(r,s){if(!n)return s(new Error("db not connected"));var c=t||{},d=c.wordEn,l=c.wordZh;if(!d||!l)return s(new Error("word object incorrect"));var p=n.transaction("learned","readwrite"),w=p.objectStore("learned"),b=w.index("user").get(e);b.onsuccess=function(t){var n=t.target.result,c=!1;if(n){n.words&&n.words[d]?(c=!0,n=Object(a["a"])(Object(a["a"])({},n),{},{words:Object(a["a"])(Object(a["a"])({},n.words),{},Object(o["a"])({},d,{value:l,period:i||n.words[d].period+g,stage:f||n.words[d].stage+v,updatedAt:u?Date.now():n.words[d].updatedAt}))})):n=Object(a["a"])(Object(a["a"])({},n),{},{words:Object(a["a"])(Object(a["a"])({},n.words||{}),{},Object(o["a"])({},d,{value:l,period:i||1,stage:f||7,updatedAt:Date.now()}))});var p=w.put(n);p.onsuccess=function(e){r(c?"update":"add")},p.onerror=function(e){s(e.target.error)}}else{n={user:e,words:Object(o["a"])({},d,{value:l,period:i||1,stage:f||7,updatedAt:Date.now()})};var b=w.add(n);b.onsuccess=function(e){r("new")},b.onerror=function(e){s(e.target.error)}}},b.onerror=function(e){s(e.target.error)}}))},j=function(e,t,r){var s=r.location,u=void 0===s?0:s,c=r.change,i=void 0===c?0:c;return new Promise((function(r,s){if(!n)return s(new Error("db not connected"));var c=n.transaction("progress","readwrite"),d=c.objectStore("progress"),f=d.index("user").get(e);f.onsuccess=function(n){var c=n.target.result,f=!1;if(c){c.lists&&c.lists[t]?(f=!0,c=Object(a["a"])(Object(a["a"])({},c),{},{lists:Object(a["a"])(Object(a["a"])({},c.lists),{},Object(o["a"])({},t,{startedAt:c.lists[t].startedAt,location:u||c.lists[t].location+i,updatedAt:Date.now()}))})):c=Object(a["a"])(Object(a["a"])({},c),{},{lists:Object(a["a"])(Object(a["a"])({},c.lists||{}),{},Object(o["a"])({},t,{location:u+i,startedAt:Date.now(),updatedAt:Date.now()}))});var l=d.put(c);l.onsuccess=function(e){r(f?"update":"add")},l.onerror=function(e){s(e.target.error)}}else{c={user:e,lists:Object(o["a"])({},t,{location:u+i,startedAt:Date.now(),updatedAt:Date.now()})};var g=d.add(c);g.onsuccess=function(e){r("new")},g.onerror=function(e){s(e.target.error)}}},f.onerror=function(e){s(e.target.error)}}))},y={connect:u,newUser:f,getUserById:l,getUserByName:g,userLogin:p,getLearnedByUserId:v,getProgressByUserId:w,getUserListProgress:b,isUserLearnedWord:m,editUserLearned:h,editUserProgress:j,getNotes:c,createNotes:i,deleteNotes:d};u(),t["a"]=y},"7c55":function(e,t,r){"use strict";var n=r("2395"),o=r.n(n);o.a}});
//# sourceMappingURL=app.8ad2ab17.js.map